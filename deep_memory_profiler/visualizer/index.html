<!DOCTYPE html>
<!--
Copyright 2013 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<meta charset="utf-8">
<link rel="stylesheet" href="static/index.css">
<link rel="stylesheet" href="static/third_party/jqTree/jqtree.css">

<script src="static/third_party/flot/jquery.min.js"></script>
<script src="static/third_party/flot/jquery.flot.min.js"></script>
<script src="static/third_party/flot/jquery.flot.stack.min.js"></script>
<script src="static/third_party/jqTree/tree.jquery.js"></script>
<script src="static/utility.js"></script>
<script src="static/profiler.js"></script>
<script src="static/graph-view.js"></script>
<script src="static/dropdown-view.js"></script>
<script src="static/menu-view.js"></script>
<script>
$(function() {
  {% if json is defined and template is defined %}
    // Create model.
    var profiler = new Profiler({{ json|safe }}, {{ template|safe }});
    // Create views subscribing model events.
    var graphView = new GraphView(profiler);
    var dropdownView = new DropdownView(profiler);
    var menuView = new MenuView(profiler);

    // initialize categories according to roots information.
    profiler.reparse();
  {% endif %}
});
</script>

<body>
  <h2>Deep Memory Profiler Visulaizer</h2>
  <form enctype="multipart/form-data" action="{{ upload_url }}" method="post">
    <input type="file" name="file"/>
    <input type="submit" value="Upload"/>
    <p><font color="red">
      {{ upload_msg }}
    </font></p>
  </form>
  <div id="graph-div"></div>
  <div id="info-div">
    <div id="subs-dropdown"></div>
    <div id="category-menu"></div>
  </div>
</body>